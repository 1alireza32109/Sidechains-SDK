package com.horizen.datagenerator

import com.horizen.block._
import com.horizen.params.{NetworkParams, RegTestParams}
import com.horizen.utils.BytesUtils
import java.time.Instant
import com.horizen.box.ForgerBox
import com.horizen.fixtures.{CompanionsFixture, ForgerBoxFixture, MerkleTreeFixture}
import com.horizen.proof.{Signature25519, VrfProof}
import com.horizen.consensus._
import com.horizen.secret.VrfKeyGenerator
import org.junit.Test
import scorex.core.block.Block
import scorex.util.{ModifierId, bytesToId}


class sc_node_holder_fixter_settings extends CompanionsFixture {
  private val seed = 49850L

  @Test
  def generate_scGenesisBlockHex(): Unit = {
    val parentId: ModifierId = bytesToId(new Array[Byte](32))
    //val timestamp = 1574077098L
    val timestamp = Instant.now.getEpochSecond
    // Genesis MC block hex created in regtest from MC branch add_attributes_snark on 25.05.2020
    //related data:
    //    genesisSecrets = ["03000000601dcc99d336d204aa846ffc380fdc103d08a76d024555199e71f88ece7459170b7bc5d7e03aefb101f7e6e4a081365b5bb0959447cb2d59a9930245123592e6255595ee6c1a239b89567d0c3ce6aebc2df63193edf8f678015abb10b88c840100a55bb67d205230796001f38e7b2a80f5e69bc69a421af20e6a77fae36bbf57ccf9dbcca77a92a2f8331caa0224bbbbf582c06211da0229e696aa4806854c966fbc1b10e2a8725abfd6b57e57a3d6e1cddc9aa0218d786b5dccc5cbb3397900004f5a08d5d4df41de5aa22a36ab8f280ca8f8e1e7d655d4b6ec8da96e5a5c224561b50d62bc42acca1f626817f20ecbe373408ebc2c9aee354347fcc05067c3c8dce3e10ae16dca85d1c06eab6004d178fcc04de99177fded17afaa5fcf3a000000", "00a18e96d04ae2a1eb61e3420404f39e394c460f1559a0417cb4892165ff938d4c80ad27eeefb611d7ff7c4bc6afab2ce31fe0f3c96d49dc22db126e2f9c5a1967"]
    //    signersPublicKeys = ["3489349ff8a657b63863f48c127ef9e19d01a6ccd0662f7a837cb6bba3b4a264d7944c0bba3de60c95a3c8fc086730e4f54a4453bc34d4f43218197bad562dafcb33a3b9929fa6a7ba2f8723796a46236f4e01a30f48dd6d653ec8e68c6d0100ec1b7b4cde5f12a8e98d9ceaa2c64a9c50269a1e71d6933a5391d0db4bc91cb6a38908e62deecfeea08e32b1cd8e5d88bd2863fdb5a275696667903fca64d4e80e37400e0cc43a4158d76a0ba67abe69466ac3f2606ba29fe0875b544435000000", "b1fb0be6154fe1f725fde5a86461930104ea8a7f75fdd5e7261dc807670c6901d811382a7789c70a85dfa5f8f54161f142d506e615243efb145cc671186617e691572efc50dbd0b2dceede0f91c41bff25ab2295888b6995fd3ecb21046901003b697ef78d1be7b360a727ea152ca44d65bd3fe9f15a08b7444137da618302d0ec712de8d8480814c0069510a45a66e010b602f6f4b8fa42d00cfc7808a4fa14a81c388c3af3c291cde6a50597c644cedf4312114883b24c8a9c21e2a098000000", "3f507f136d160df793e626e7b6ffe2300a570d969ef9fd88d83b26387e97c053bbd0f99f411c7b2760aed4dbb6b18418db159b479f4081140d98f7b5580a55c73b020a1d07946594c6582f6dba62e27a3e122d29fb512c3e68dd43cd330c0100d456871d29b6461f610baa4df8129f9afaae94cad35ed72fcbe7e9a12bf32e7a0e1a432dd79e95952f22ebba1703d1f15a36b5a20349834ba9814b6fec646361e214e428347efe6c47cb3a1d88b5d4d0281c8e36d5ce0417b19b6f3a270d010000", "4ff0d2f1d3da3595746fe0abed693c97be93ff3dbfba2d56adb1cc4fb089c37f63f42ca206a87822b53e2b172c4f8c4495a8c4b555ea08745397172cc1a5ae144f9f821ced5d12528b8f5deedf4589a33dbe5008698091d0bc95f38617bd01003f9b5ae638b5fa808f08fae2b51b37ccbec4439a60667cd02d914db6382de37b9413434ed674193a183831bfe1b672aff79cec4c157a0d7dcd348b3d1223d0144c67694be9f5eaf078c40111e007118f3fe9742bff21ad5b6972600fe8bf010000", "b144ed4889bd077514aac9f810480a89fb7c9a5e7abdfccfd49619bce6bef2de9499b11858fa9052cbda63cde85c9b2886a2551779578d2f9ce5929b9f6cb7c3d5650830a309ca48ca32832ddfab81a7e83a4767fd41eb1fa70d14433624010036cdb9131fbde180addbe9ed73e6b7fc3552f5e14c7b5cb5e5637722e79d83832cfb39a0ea350d302a3cbffb98f3d944c8d05d85ad2d26ccf88664661cf6f4b8476292521084c8687dbf4cb964212d0694c459790f21749986e22ce57f2e000000", "6eb1e86ec6d13e012473d313340df0f4c5edb9a103641adf3d251f3b678649e39a2a8d3473e0e3921fdd6f1277b7c2a648d237a13f7bd6223c28f2fdedfda0b18f901afa9293c69a7562da4122e9bce5625f2eda9dd9e88c937ada5ffa6d0000f0472ba129e78e5a3432e31d3d88882e84638660bf45accf27761efcdee87e1b5ebf6a6563f3d5796fdae5c6de3a6cd613bc46e3fda2774b2e47c02f4f9e759a6dcaef59d246de060a9dd8d3288fa10d6a87dfb475bd789cd9313bb5d356010000", "62dfa2d807b259e9d28d209d16b860c12d7b692902a3b4aaa94886e5498ff01c4a8e1a38602b95a582b2693bd944f459fb2362134a39270cb7c5ce5c47fa1abaf0f89327e033c46db295df3622a615492ee321a7b3aa73b6982f4618a1a700004f4e060bcd74f96f4b5d455c130516b9e7398cb31411114aa551819f051038b8e57f50d8384d7ba085451ced60834d62073d88d4b7162112a3c0d60db7ea57fab3efe144df26ec2cb1e76603a7e315729ffbc988d9983c0e93df24cb21f8000000"]
    //    signersThreshold = 5
    //    signersSecrets = ["0400000060d23b70d717d40f8a56b79f91163e6c1e6e02f0187643d78cd1d8c8da41a2c552b5a5b533d19a66c4fbb880b515c5b9c9f4b84cc33e25f53a94cc1169bcd0c93331db719b59d105599c869cc7c42b575d05e1809774451b08e09ac3b4dd2e01003489349ff8a657b63863f48c127ef9e19d01a6ccd0662f7a837cb6bba3b4a264d7944c0bba3de60c95a3c8fc086730e4f54a4453bc34d4f43218197bad562dafcb33a3b9929fa6a7ba2f8723796a46236f4e01a30f48dd6d653ec8e68c6d0100ec1b7b4cde5f12a8e98d9ceaa2c64a9c50269a1e71d6933a5391d0db4bc91cb6a38908e62deecfeea08e32b1cd8e5d88bd2863fdb5a275696667903fca64d4e80e37400e0cc43a4158d76a0ba67abe69466ac3f2606ba29fe0875b544435000000", "0400000060468f75a012e6f56d15bb09ba41933530bd9eb4eb44f301a6b52d6cd16051fc0305646ddfc09fd03b55670bd20ba94b219afcb7bd604db4588036727fa94000ef9cee78b207f5056c4fffcf6d6b463475efc5c8e5c41d20eeb13ea08dcccf0000b1fb0be6154fe1f725fde5a86461930104ea8a7f75fdd5e7261dc807670c6901d811382a7789c70a85dfa5f8f54161f142d506e615243efb145cc671186617e691572efc50dbd0b2dceede0f91c41bff25ab2295888b6995fd3ecb21046901003b697ef78d1be7b360a727ea152ca44d65bd3fe9f15a08b7444137da618302d0ec712de8d8480814c0069510a45a66e010b602f6f4b8fa42d00cfc7808a4fa14a81c388c3af3c291cde6a50597c644cedf4312114883b24c8a9c21e2a098000000", "0400000060103340f53629b304d985f74df4c0a2ca6fd4e6564eafa4f0d8aceeb9e90f3ee3e40a531e76cf48fc8d0795a316b482ac2f07483439e6b99c0290222c8e1a295a84cf73d405d42796f8112c7973ba11053f1163b4c98669ab06dcd8936b1f00003f507f136d160df793e626e7b6ffe2300a570d969ef9fd88d83b26387e97c053bbd0f99f411c7b2760aed4dbb6b18418db159b479f4081140d98f7b5580a55c73b020a1d07946594c6582f6dba62e27a3e122d29fb512c3e68dd43cd330c0100d456871d29b6461f610baa4df8129f9afaae94cad35ed72fcbe7e9a12bf32e7a0e1a432dd79e95952f22ebba1703d1f15a36b5a20349834ba9814b6fec646361e214e428347efe6c47cb3a1d88b5d4d0281c8e36d5ce0417b19b6f3a270d010000", "040000006025070e5700e0a214b77a47a57f0a40f16eb09b8597a556325c6582582f2f209b76f29ee6a5585b51fd53aa519c21182918c616acb11f9b06a635039f0f093d9fa93e3af5f4dc8a5350d2c4f414d97314e3f2380b398921a2574e236b6e0a00004ff0d2f1d3da3595746fe0abed693c97be93ff3dbfba2d56adb1cc4fb089c37f63f42ca206a87822b53e2b172c4f8c4495a8c4b555ea08745397172cc1a5ae144f9f821ced5d12528b8f5deedf4589a33dbe5008698091d0bc95f38617bd01003f9b5ae638b5fa808f08fae2b51b37ccbec4439a60667cd02d914db6382de37b9413434ed674193a183831bfe1b672aff79cec4c157a0d7dcd348b3d1223d0144c67694be9f5eaf078c40111e007118f3fe9742bff21ad5b6972600fe8bf010000", "0400000060df4e7ca96deccdbfd9448f3c9bbf9b8d59697015abbab995a353ea68363f84219dbdd73d46aa645de1df14d31eb9badaedfd640fc9a7bb4c1e151366761d45840c7dbc64d9b02d61f921acb37f625ab11eb5f33210512f8be4c4f50243570000b144ed4889bd077514aac9f810480a89fb7c9a5e7abdfccfd49619bce6bef2de9499b11858fa9052cbda63cde85c9b2886a2551779578d2f9ce5929b9f6cb7c3d5650830a309ca48ca32832ddfab81a7e83a4767fd41eb1fa70d14433624010036cdb9131fbde180addbe9ed73e6b7fc3552f5e14c7b5cb5e5637722e79d83832cfb39a0ea350d302a3cbffb98f3d944c8d05d85ad2d26ccf88664661cf6f4b8476292521084c8687dbf4cb964212d0694c459790f21749986e22ce57f2e000000", "040000006046b0239d71532b07beaf854483b436a954aeafbbf31d507861a580a8427c0d2b5fd7a288dfc4ff3b94e8dfd86a45182248aec6cd2f8c3d6588e8b8bc1945741554dd7a9fcbe1456cd788a92cf91c460f7370c4440e1bea2411bd57dd9d6301006eb1e86ec6d13e012473d313340df0f4c5edb9a103641adf3d251f3b678649e39a2a8d3473e0e3921fdd6f1277b7c2a648d237a13f7bd6223c28f2fdedfda0b18f901afa9293c69a7562da4122e9bce5625f2eda9dd9e88c937ada5ffa6d0000f0472ba129e78e5a3432e31d3d88882e84638660bf45accf27761efcdee87e1b5ebf6a6563f3d5796fdae5c6de3a6cd613bc46e3fda2774b2e47c02f4f9e759a6dcaef59d246de060a9dd8d3288fa10d6a87dfb475bd789cd9313bb5d356010000", "0400000060bcd95917c62659e16d26ef417ab4c43c835534f0d5dbe2e337f339bd880495137a60397395262d1962d50ac71215dd936821e7ca9d745a9dddfae3b8c7986cabce903af7f68b62de96ac399737b48d2c8a0f4ff9e7d6982929902aa3dfb4000062dfa2d807b259e9d28d209d16b860c12d7b692902a3b4aaa94886e5498ff01c4a8e1a38602b95a582b2693bd944f459fb2362134a39270cb7c5ce5c47fa1abaf0f89327e033c46db295df3622a615492ee321a7b3aa73b6982f4618a1a700004f4e060bcd74f96f4b5d455c130516b9e7398cb31411114aa551819f051038b8e57f50d8384d7ba085451ced60834d62073d88d4b7162112a3c0d60db7ea57fab3efe144df26ec2cb1e76603a7e315729ffbc988d9983c0e93df24cb21f8000000"]
    val mcBlockHex: String = "03000000b4d023aee22998d7328770806b0db40064f61c2b9a044187e1912a4aea29630c8e73841b77e020506e1abcd467d7399794bd4a40a1b3b4c95d38564494305732c3f879aebb08c009d31fb51f3b713db83d224b8665dabfbc9d7cc684fa8177b27aead05e030f0f200200be8d50efddbc8c9c29f2f03fda4c3dc884f3a50558840938a0ec97f000002404858d3d7383be0d6a29ddf7ff36df4ee9ab26a8383f06ad6313a62cff10d7d32fd293c50201000000010000000000000000000000000000000000000000000000000000000000000000ffffffff0502dc000101ffffffff047c24b42c000000001976a914e8cdb5badfa07860f46245e87f81455bd1e4e7dd88ac80b2e60e0000000017a914b6863b182a52745bf6d5fb190139a2aa876c08f587405973070000000017a914b6863b182a52745bf6d5fb190139a2aa876c08f587405973070000000017a914b6863b182a52745bf6d5fb190139a2aa876c08f58700000000fcffffff09633461f9b7392fe446eb55b12535c5d78422cdf52c6738882c90e53ec47dc954000000006b4830450221008dad8fe702a548118d9b650931f048c555c24dbc8c29248b5c47921aca7662ba02205604ff029a0775ffb4d0ebf5acbb5f6bdc3d691f589e3ed0783ed8344d075045012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfefffffff6790061c1f469d5f20ab3b819bbbd3f5ea495cdc50300438323eed274c34770000000006a47304402204ec8d3f7716dea7afdb53a3862fa9e496bb254c9594e7e245695622fbe15aab4022031172363a71b653b81f46ff2c6e703088dd064a7102380a22aa5ebdf94803cc2012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffff2f4e9c7bf8bab3c3fbf3c062076bd4412eaa9e3b09ea850059f2a2e893879a28000000006a4730440220172b46d7cd418f8d3dbcdcb81614174daa134175df8382d068972b42ef946ef202200fc7b631938f7de1101973df4013e245fb2342ccbbe35106f9e7ee40eb69c26e012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffff980ff1220cd24d9f60cdac9280b84a4eaa693f9344d58d0585bb5c7bba963e07000000006b483045022100efea77d5b2b189c7a25367087788cb2ae7a4af16b21863ed0c5fe6a6bdc7fa4502204ae9ae3d2fda7e5066c80e56c2bf08d33caa080ae630c0d4f6b1bf17eb121639012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffffeafb1aecacb71f4de5d4872c10774b4884725455fa18588a5d3d7452a1c5b5bf000000006a473044022042c4196fe3b7fefd82bc0affa6fbf6a813e9fa1082e05a3fbb49065efc61349302205379b12fc11affafe7cec9453786d5c6ce47d30fbad5b97bc70e2355937e629f012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffff3615c594012907b389db2d1fc6d4c104d5ad08610df87bd5936adf48b6155800000000006a473044022000809b48593c127480093e13143e1e16a3d2c8aa6a8a78d9c8b03670d4a2ab01022002c91a0ebdc5f61ea57dc57f51315e7daa403d410ce06f3e67255f0c1b74640b012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffffd55fe037942769f75e77d10a35a6c922c0670aaf5ba20dd67c523287dcc16c5a000000006a4730440220049fd18de250f2cbe56efb3c93a62f0f6907e9b80a23ed3689c8325db4246d1b02207ee1a0ed155f6c2e417135ad7cd7acedf358da74358e418b9aafd3276b638e60012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffff5629feb71ef0d283e2e91bfea05bc1a39936e16953a5cc80e791e93284bfe9d1000000006a47304402206bede6f4b98f4606313d3e4d62e563581eef70890218f5be4f029cca2412995e02200f2de640ef437962ccef1c48074aa2a7f2019365b3d444bb5e2adbc30b597f8a012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfefffffff4429da36391d5b3f6376ca34b46d263c07aa448dc9ca61dfee8101071343ac9000000006a47304402207fcc21506f60b20ba5c95d30356f57924a6e1eeec77dae9ffde8c5210be32a63022052020e8da5bf64eac2f889359f1ce5c6cd88763c494f07302a13b8b84cdf84bd012103f6e175e15e1190cb6de2eaa887ac87c730248e97194619f798f788b9c2051f5dfeffffff01446b7d01000000003c76a91413ee89c877ef428df53e295cfd2c92b4a89ef49188ac20bb1acf2c1fc1228967a611c7db30632098f0c641855180b5fe23793b72eea50d00b40101000000000000000000000000000000000000000000000000000000000000000a00000000e40b540200000067195a9c2f6e12db22dc496dc9f3e01fe32cabafc64b7cffd711b6efee27ad80c1a55bb67d205230796001f38e7b2a80f5e69bc69a421af20e6a77fae36bbf57ccf9dbcca77a92a2f8331caa0224bbbbf582c06211da0229e696aa4806854c966fbc1b10e2a8725abfd6b57e57a3d6e1cddc9aa0218d786b5dccc5cbb3397900004f5a08d5d4df41de5aa22a36ab8f280ca8f8e1e7d655d4b6ec8da96e5a5c224561b50d62bc42acca1f626817f20ecbe373408ebc2c9aee354347fcc05067c3c8dce3e10ae16dca85d1c06eab6004d178fcc04de99177fded17afaa5fcf3a000000606e995bc5d61509c4385eb079d5c85a68de8e580f779a4755be516d6231241372bc4c2f61bd79b8f50c59b714292293c6cf0ca6f45be5882446d4dce54a58f1f20a0f1c565a4c07d5ed5a5a6d0db2465d4c73132f2011da8d7eb5fa3d243b01005e7b462cc84ae0faaa5884bd5c4a5a5edf13db210599aeeb4d273c0f5f32967b7071ce2b4d490b9f08f6ce66a8405735c79197cd6773d1c5aeb2a38da1c102df07b05879c77198e5aafa7feed25d4137e86b3d98d9edd9547a460f1615b10000ee9570fbffedd44170477b37500a0a1cb3f94b6361f10f8a68c4075fbc17542d7174b3d95e12ddb8aea5d6b6c53c1df6c8f60010cd2e69902ba5e89e86747569463a23254730fc8d2aabf39648a505df9dcce461443b181ef3eda46074070000550836db2c97820971db6b1421e348d946ed4d3f255295abea46556615e3123de33ec56f784f70302901a4bc10c79c6a8b1e32477aeff9fba75876592981b678fc5a2703ac0b3055e567a6cb1ebab578fc4f9121fd968680250696cb85790000078fcfb60bdfc79aa1e377cb120480538e0236156f23129a88824ca5a1d77e371e5e98a16e6f32087c91aa02a4f5e00e412e515c3b678f6535141203c6886c637b626a2ada4062d037503359a680979091c68941a307db6e4ed8bc49d21b00002f0e6f88fb69309873fdefb015569e5511fb5399295204876543d065d177bf36ab79183a7c5e504b50691bc5b4ed0293324cfe2555d3fc8e39485822a90a91afcd4ef79ec3aefbd4cbe25cbccd802d8334ce1dce238c3f7505330a14615500001f89fbe1922ab3aa31a28fd29e19673714a7e48050dee59859d68345bb7bee7d5e888d8b798a58d7c650f9138304c05a92b668294c6114185ccb2c67ce0bbbb7e1dcbb6d76f5cacd7c9732a33b21d69bd7a28c9cca68b5735d50413862bc0100308bb0dd0bd53f3d1134966702dd3c7cc8b58b270a6996a646493250b0d5f3978d0c971f8fa7a0c958f3efe2fa5269244973fafb701c2eb66dd25901f93d677ab6c538c1ed11f115e52d3f2c7087ea40c3e8cd089376baa38842e9429b5f0000d19a8d874d791f952f13d3c8ecd92e44009c09815e5ae6a8e5def7ea52fe3de4accfb5ba2aa401fbcec14b069cd0dc0f66ab025b45ef9831a26acf58673db7487043654e7980fcb2b6c1bd7593a4dfff810436f653e309121c7ccf2df70b010000732254ec6df184be360cd9ed383ed7c8c236d7761cfc0ce4e7f0cac5a06f4edab9cfc75a7dc1449c0e18ed9564c974c2e1b6847c637f74e5d391cbc80fc6e672ffd66b5ce4fb73bda8359ab8a0ea1e855df1e07d82f93c935c7e1a9a55c5000065efdbb7c3e82291a482b2f24cbd46f4dd02c370cf6dcfe8fb3c00b8b004b5ad51369b1f1b134a824d1f16d72ca6a27ba2d6190150329139cf2c6d9e5a14722f8d39b96b882c1f60a7b230e929819e2abe1cd9d7f3e8c726b1a94d20c8010100732c396eca6ffa1bf851cef449f2f087edd93e4f641b4bd93a482d9f129e675aedb688993d4e2cee824d2803301364ba10fbb66895927adb53bad8aefe8a1caab6f4ccb45883e414a1223ac7f90a89087cd752dfa0c7b3e19bbae000edd5000028d1d23c627d1252d2a2a20a246af2280f50e3fde667873aadd9893ba6833118358398e7428e717128f764714a8d52b090c1f554f58e25ea815338d7bc7326c949567e74f2f2ab3c88f5075fea75594608b8937c9059a42d712ffbd1bd980100000000000250c1a474689e375a309446e5cdd3a0c26cecdcff5c7b8cdc0728868983f1a35a49e3a1bae6f969c3d47356c08d3d169d2c0a2be908d82cd35f41a23d8c2924a9f790ab3a00d53061d440a176670d6a32de2ecd19cf8a9774729c09a6ea4d0100d8838bf55d95521291da12294b302c66042eda0dc2acc79360a1fdd8c9a366fa790c52bf926c2d96b5ba88a3a443487c5235f7c476f350c2101cfbe3bd0361dd291ebc5e42c097a158704b71006886a3662ca6db7d816b4ad12444835d89000000795ce2b34aef921ccb3d9b9695f5d3fe0a03743c955cfcf01f8a1815a7c8b03de85fe15201d4b4b6f401cb334a6988ea5bde8986a468c47c3c6a5ae96a3160ff15e06699ea82bd40c0d5547fe1be77af7817861bbfcca3f4232f05a9cec800006c216565cee4d57b32d2d70bb3cb8d4a967c0eb5d7137b2ec58466f3d4d3b5375e4baa823bcc29c6ad877d9708cd5dc1c31fa3883a80710431110c4aa22e97b67fa639f54e86cfab87187011270139df7873bed12f6fb8cd9ab48f3893380100000000d100000000"
    val params: NetworkParams = RegTestParams(sidechainId = BytesUtils.fromHexString("0000000000000000000000000000000000000000000000000000000000000001"))
    val mcRef: MainchainBlockReference = MainchainBlockReference.create(BytesUtils.fromHexString(mcBlockHex), params).get
    val mainchainBlockReferences = Seq(mcRef)
    val (forgerBox: ForgerBox, forgerMetadata)= ForgerBoxFixture.generateForgerBox(seed)
    val secretKey = VrfKeyGenerator.getInstance().generateSecret(seed.toString.getBytes)
    val publicKey = secretKey.publicImage()
    val genesisMessage =
      buildVrfMessage(intToConsensusSlotNumber(1), NonceConsensusEpochInfo(ConsensusNonce @@ "42".getBytes))
    val vrfProof: VrfProof = secretKey.prove(genesisMessage).getKey
    val merklePath = MerkleTreeFixture.generateRandomMerklePath(seed + 1)
    val companion = getDefaultTransactionsCompanion

    val mainchainBlockReferencesData = mainchainBlockReferences.map(_.data)
    val mainchainHeaders = mainchainBlockReferences.map(_.header)

    val sidechainTransactionsMerkleRootHash: Array[Byte] = SidechainBlock.calculateTransactionsMerkleRootHash(Seq())
    val mainchainMerkleRootHash: Array[Byte] = SidechainBlock.calculateMainchainMerkleRootHash(mainchainBlockReferencesData, mainchainHeaders)
    val ommersMerkleRootHash: Array[Byte] = SidechainBlock.calculateOmmersMerkleRootHash(Seq())

    val blockVersion: Block.Version = 1: Byte

    val unsignedBlockHeader: SidechainBlockHeader = SidechainBlockHeader(
      blockVersion,
      parentId,
      timestamp,
      forgerBox,
      merklePath,
      vrfProof,
      sidechainTransactionsMerkleRootHash,
      mainchainMerkleRootHash,
      ommersMerkleRootHash,
      0,
      new Signature25519(new Array[Byte](Signature25519.SIGNATURE_LENGTH)) // empty signature
    )

    val signature = forgerMetadata.blockSignSecret.sign(unsignedBlockHeader.messageToSign)

    val signedBlockHeader: SidechainBlockHeader = SidechainBlockHeader(
      blockVersion,
      parentId,
      timestamp,
      forgerBox,
      merklePath,
      vrfProof,
      sidechainTransactionsMerkleRootHash,
      mainchainMerkleRootHash,
      ommersMerkleRootHash,
      0,
      signature
    )

    val data = new SidechainBlock(signedBlockHeader, Seq(), mainchainBlockReferencesData, mainchainHeaders, Seq(), companion)

    val hexString = data.bytes.map("%02X" format _).mkString.toLowerCase
    println(hexString)
  }
}
